__d(function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.queryToOperationOptions=function(t){return{type:'graphql',operation:t.query,variables:void 0,fetchPolicy:'cache-first',dedupePolicy:'dedupe-inflight',usePOSTForQuery:!1,context:{},skip:!1,deferrable:!1,headers:{},...t,queryRef:void 0}}},"043517",[]);
__d(function(g,r,i,a,m,e,d){"use strict";function t(){const n=r(d[0]);return t=function(){return n},n}Object.defineProperty(e,"__esModule",{value:!0}),e.computeParameterizizedFieldCacheKey=function({parentKey:n,parameterizedFields:c,variables:u}){return`${n}/${c}:${u?JSON.stringify((0,t().convertToStableObjectOrder)(u)):''}`}},"05fe62",["fad99e"]);
__d(function(g,r,i,a,m,e,d){"use strict";function t(){const n=r(d[0]);return t=function(){return n},n}Object.defineProperty(e,"__esModule",{value:!0}),e.timeoutSignalTransform=function(n){const{timeout:o,multiAbortController:u}=n,c=(0,t().createTimeoutSignal)(o);c&&u.addSufficientSignal(c);return n}},"096956",["a9e08c"]);
__d(function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.skipResolver=function(s){if(s.skip)return t};const t={data:void 0,skip:!0}},"0c3d76",[]);
__d(function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.logRetryCount=function(n,t,c,o){const s={view_name:o,is_legacy:c};t?n.increment('airlock.niobe.retrier.success',1,s):n.increment('airlock.niobe.retrier.failure',1,s)}},"10cc07",[]);
__d(function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){return(0,n.openSignupOrLoginModal)({authTriggerType:o.AuthTriggerTypes.RECAPTCHA,onFinishedFlow:()=>window.location.reload(),onModalClose:()=>window.location.reload()})};var o=r(d[0]),n=r(d[1])},"178cf3",["5eb3f8","4798c3"]);
__d(function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getKeyPathValue=function(t,u){return u[t]}},"1e477a",[]);
__d(function(g,r,i,a,m,e,d){"use strict";var o=r(d[0]).default;Object.defineProperty(e,"__esModule",{value:!0}),e.handleAirlockError=function({airlock:o,onSuccess:c,onError:t,error:l,niobeClient:u}){n.default.emit('airlock:niobe:trigger',{airlock:o,onSuccess:c,onError:t,error:l,niobeClient:u})};var n=o(r(d[1]))},"1fbf90",["ba7a76","abc3e4"]);
__d(function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.redirectToAirlockIfGhostingAppeal=function(l,c){const p=(0,t.getGraphqlGhostingAppealUri)(l);if(p)return c&&(0,o.logRetrierCancelled)(c,'ghostingAppeal'),(0,n.redirectToAirlock)(p),!0;return!1};var t=r(d[0]),o=r(d[1]),n=r(d[2])},"24be2a",["81c2d5","40f641","e91c21"]);
__d(function(g,r,i,a,m,e,d){"use strict";var o=r(d[0]).default;Object.defineProperty(e,"__esModule",{value:!0}),e.airlockRetrier=void 0;var t=r(d[1]),l=o(r(d[2])),c=r(d[3]),n=r(d[4]),f=r(d[5]),s=r(d[6]),u=r(d[7]),v=r(d[8]),k=r(d[9]),R=r(d[10]),p=r(d[11]);e.airlockRetrier=({result:o,metricReporter:y,options:E,flagger:h,jitneyLogger:A,niobeClient:_})=>{const L=void 0,q=o;if((0,p.redirectToAirlockIfGhostingAppeal)(q,y))return;let w=null;if(w=o?.data?.client_error_info?(0,t.extractAirlockData)(o.data):(0,n.extractGraphqlAirlockError)(o.error?.graphQLErrors)||(0,t.extractAirlockData)(q),!w)return;(0,u.logAirlockLifecycleEvent)('RECEIVED_BY_FRONTEND',w);const I=(0,t.isLegacyAirlock)(w),N=(0,t.getAirlockId)(w)??void 0,U=(0,f.extractViewName)(w,I);return(0,l.default)({actionType:1,endpoint:E.fetchUrl,flow:U??void 0,airlockId:N??void 0}),(0,R.redirectToAirlockIfFullpage)(w,y)?void 0:{context:new Promise(o=>{(0,c.handleAirlockError)({airlock:w,onSuccess:()=>{if((0,k.logRetryCount)(y,!0,I,U),I&&!w.should_replay_request)return(0,v.logRequestReplayEvent)('requestNotReplayed',{flagger:h,jitneyLogger:A,airlockId:N,viewName:U??void 0,fetchUrl:E.fetchUrl}),void o(L);(0,v.logRequestReplayEvent)('waitForRequestReplay',{flagger:h,jitneyLogger:A,airlockId:N,viewName:U??void 0,fetchUrl:E.fetchUrl}),(0,u.logAirlockLifecycleEvent)('REQUEST_REPLAYED',w),o({fetchOptions:{headers:(0,s.getReplayAirlockHeader)(w)},airlockView:U??void 0})},onError:()=>{(0,k.logRetryCount)(y,!1,I,U),(0,v.logRequestReplayEvent)('requestNotReplayed',{flagger:h,jitneyLogger:A,airlockId:N,viewName:U??void 0,fetchUrl:E.fetchUrl}),o(L)},error:q,niobeClient:_})}),reason:'airlock'}}},"24eb52",["ba7a76","1700a4","7b3a9c","1fbf90","5895b2","8cd0d8","5ab9aa","593e28","33b938","10cc07","9f2c9e","24be2a"]);
__d(function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.buildAirlockPermitV2Header=function(){return{[t.AIRLOCK_PERMIT_V2_HEADER]:'true'}};var t=r(d[0])},"25f264",["f3d6f1"]);
__d(function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.parseServerTiming=function(t){if(!t)return;return t.split(',').map(t=>t.trim()).reduce((t,n)=>{const[s,...u]=n.split(';'),c=s.trim().replaceAll(/"/g,''),l={};return u.forEach(t=>{if(!t.includes('='))return;const[n,s]=t.trim().split('=');if(!n)return;const u=parseFloat(s);Number.isNaN(u)?l[n]=s.replace(/^"|"$/g,''):l[n]=u}),c&&(t[c]=l),t},{})}},"2f6e7b",[]);
__d(function(g,r,i,a,m,e,d){"use strict";var t=r(d[0]).default;Object.defineProperty(e,"__esModule",{value:!0}),e.agentFrictionRetrier=void 0;var n=t(r(d[1])),o=t(r(d[2])),c=t(r(d[3]));e.agentFrictionRetrier=({flagger:t,result:u,niobeClient:l})=>{if(!t.isTrebuchetLaunched((0,n.default)('csp.niobe.agent_friction_retrier.enabled')))return;const f=(0,c.default)(u);return null!==f?{context:new Promise(t=>{o.default.emit('agentFriction:niobe:trigger',{friction:f,onSuccess:()=>{t({})},onError:()=>{t(undefined)},niobeClient:l})}),reason:'agentFriction'}:void 0}},"2f7cf3",["ba7a76","2c6bf9","abc3e4","8be4f5"]);
__d(function(g,r,i,a,m,e,d){"use strict";var t=r(d[0]).default;function n(){const t=r(d[1]);return n=function(){return t},t}Object.defineProperty(e,"__esModule",{value:!0}),e.logAirlockLifecycleEvent=function(t,_){const v=(0,c.isLegacyAirlock)(_),E=(0,c.getAirlockId)(_)??void 0;if(!E)return;o.default.logJitneyEvent({schema:n().AirlockPlatformAirlockLifecycleEvent,event_data:{event_type:l[t],event_data:{airlock_id:E},lifecycle_event_meta:{platform_version:v?'v1':'v2'}}})};var c=r(d[2]),o=t(r(d[3]));const l={RECEIVED_BY_FRONTEND:3,FULL_PAGE_REDIRECT:4,REQUEST_REPLAYED:18}},"326f53",["ba7a76","a4ed0f","1700a4","c8b97a"]);
__d(function(g,r,i,a,m,e,d){"use strict";var t=r(d[0]).default;function n(){const t=r(d[1]);return n=function(){return t},t}Object.defineProperty(e,"__esModule",{value:!0}),e.logRequestReplayEvent=function(t,{flagger:c,jitneyLogger:l,airlockId:u,viewName:_,fetchUrl:f,requestId:s}){if(!c.isTrebuchetLaunched((0,o.default)('web.niobe.airlock_replay_tracking')))return;let p;switch(t){case'waitForRequestReplay':p=9;break;case'requestReplayed':p=7;break;default:p=8}l({schema:n().AirlockHandlerActionEvent,event_data:{airlock_handler_action_type:p,airlock_metadata:{airlock_identifier:u??void 0,flow:_??void 0},platform:{device_type:3,platform_id:''},airlocked_api_endpoint:f,...s?{request_id:s}:{}}})};var o=t(r(d[2]))},"33b938",["ba7a76","24396f","2c6bf9"]);
__d(function(g,r,i,a,m,e,d){"use strict";function t(){const n=r(d[0]);return t=function(){return n},n}Object.defineProperty(e,"__esModule",{value:!0}),e.computeOperationCacheKey=function(n,c){return`${n.name}:${c?JSON.stringify((0,t().convertToStableObjectOrder)(c)):''}`}},"34be0f",["fad99e"]);
__d(function(g,r,i,a,m,e,d){"use strict";function t(){const n=r(d[0]);return t=function(){return n},n}function n(){const t=r(d[1]);return n=function(){return t},t}Object.defineProperty(e,"__esModule",{value:!0}),e.extractParameterizedFieldsFromItems=function({normalizedItems:s,variables:u}){return s.map(s=>{const{parameterizedFields:o}=s;if(!o)return s;const c=o.map(o=>{const{inputs:c}=o,l=c.reduce((t,n)=>{const{name:s,value:o}=n;if('unsupported!'===o)return t;if(!o.startsWith('$'))return t[s]=o,t;if(!u)return t;const c=o.replace('$','');return u[c]?(t[s]=u[c],t):t},{}),p=(0,n().extractItemsWithLocators)({itemsLocation:o.fieldResponsePath,result:{data:s.value}});if(!p[0])return s;const[f]=p,z=f.responsePath.join('.');return{key:(0,t().computeParameterizizedFieldCacheKey)({parentKey:s.key,variables:l,parameterizedFields:z}),...f}});return{...s,parameterizedFieldsValues:c}})}},"3fe11b",["05fe62","8866cf"]);
__d(function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.logRetrierCancelled=function(n,l,c=null,t=null){const o={reason:l,view_name:t,is_legacy:c};n.increment('airlock.niobe.retrier.cancelled',1,o)}},"40f641",[]);
__d(function(g,r,i,a,m,e,d){"use strict";function t(){const n=r(d[0]);return t=function(){return n},n}Object.defineProperty(e,"__esModule",{value:!0}),e.abortSignalTransform=function(n){const{signal:o,multiAbortController:l=new(t().MultiAbortController)}=n;o&&l.addSignal(o);return{...n,multiAbortController:l}}},"41c843",["b3b435"]);
__d(function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.clearInflightQuery=function(t,o){'dedupe-inflight'===o.dedupePolicy&&t.delete(o.key)},e.inflightQueryResolver=function(t,o){const{multiAbortController:l,dedupePolicy:n,key:u}=o;if('dedupe-inflight'!==n)return;const c=t.get(u);if(!c)return;const{promise:s,multiAbortController:f}=c;return f.addSignal(l.signal),s},e.storeInflightQuery=function(t,o,l){const{multiAbortController:n,dedupePolicy:u,key:c}=o;'dedupe-inflight'!==u||t.has(c)||t.set(o.key,{promise:l,multiAbortController:n})}},"459e51",[]);
__d(function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.formatUrl=function(s,n){const c=new URL(s,s.startsWith('http')?void 0:t);n&&new URLSearchParams(n).forEach((t,s)=>c.searchParams.append(s,t));const o=c.toString();return o.startsWith(t)?o.slice(t.length):o};const t='https://__example__.com'},"45f45a",[]);
__d(function(g,r,i,a,m,e,d){"use strict";var t=r(d[0]).default;Object.defineProperty(e,"__esModule",{value:!0}),e.getBotDetectionConfigForUrl=void 0;var o=t(r(d[1]));e.getBotDetectionConfigForUrl=t=>(o.default.get('botDetectionEndpoints')||[]).find(({endpoint:o})=>t.startsWith(o))||null},"46fe00",["ba7a76","ef2bc3"]);
__d(function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.noop=function(){}},"48048d",[]);
__d(function(g,r,i,a,m,e,d){"use strict";var c=r(d[0]).default;Object.defineProperty(e,"__esModule",{value:!0}),e.getLocaleAndCurrencyQueryString=function(c){const l=u.default.current().curr;return{locale:c?.locale??t.default.locale(),...l?{currency:l}:{}}};var t=c(r(d[1])),u=c(r(d[2]))},"4c8a33",["ba7a76","862e50","06a99e"]);
__d(function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.extractGraphqlAirlockError=function(n){return n?.map(t=>t.extensions?.response?.body).map(t.extractAirlockData).find(t=>null!=t)};var t=r(d[0])},"5895b2",["1700a4"]);
__d(function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"logAirlockLifecycleEvent",{enumerable:!0,get:function(){return t.logAirlockLifecycleEvent}}),Object.defineProperty(e,"logRequestReplayEvent",{enumerable:!0,get:function(){return n.logRequestReplayEvent}}),Object.defineProperty(e,"logRetrierCancelled",{enumerable:!0,get:function(){return l.logRetrierCancelled}}),Object.defineProperty(e,"logRetryCount",{enumerable:!0,get:function(){return o.logRetryCount}});var t=r(d[0]),n=r(d[1]),l=r(d[2]),o=r(d[3])},"593e28",["326f53","33b938","40f641","10cc07"]);
__d(function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getReplayAirlockHeader=function(n){const o=(0,t.getAirlockId)(n);return{[c.AIRLOCK_REPLAY_HEADER]:o??''}};var t=r(d[0]),c=r(d[1])},"5ab9aa",["1700a4","f3d6f1"]);
__d(function(g,r,i,a,m,e,d){"use strict";function t(){const n=r(d[0]);return t=function(){return n},n}function n(t){return t.split('?')[0].replace(/\/{2,}/g,'/').replace(/(^\/?([^/]+\/){3}).*/g,'$1').replace(/\/$/,'')}function o(t){const[n,o]=t.split('?');if(!o)return n;const c=new URLSearchParams(o);return['currency','locale'].forEach(t=>c.delete(t)),c.size?`${n}?${c.toString()}`:n}Object.defineProperty(e,"__esModule",{value:!0}),e.computeSubscriptionNormalizationIdentifiers=function(n){const{subscription:o,variables:c}=n,{normalizedItemsLocators:s}=o;return{subscriptionCacheKey:(0,t().computeOperationCacheKey)(o,c),normalizedItemsLocators:s}},e.identifyGraphQLTransform=function(n){const o=n.queryRef?.options,{operation:c,variables:s}=o||n,u=c.name,p=(0,t().computeOperationCacheKey)(c,s);return{...n,operationName:u,operationType:c.type,key:p}},e.identifyRESTTransform=function(t){const{fetchUrl:c,url:s,method:u,body:p,skip:f}=t;return{...t,operationName:n(s),operationType:'query',key:`${o(c)}:${u}:${JSON.stringify(p)}${f?':skipped':''}`}}},"5b3464",["34be0f"]);
__d(function(g,r,i,a,m,e,d){"use strict";var t=r(d[0]).default;Object.defineProperty(e,"__esModule",{value:!0}),e.deliverNiobeBotDetection=function(){const t=(0,n.getTreatmentOverride)('niobe_bot_platform_force_in');if((0,o.default)(t))return t;return!0};var n=r(d[1]),o=t(r(d[2]))},"60f717",["ba7a76","f9341a","58861b"]);
__d(function(g,r,i,a,m,e,d){"use strict";var t=r(d[0]).default;Object.defineProperty(e,"__esModule",{value:!0}),e.extractNormalizedItems=function(t,o,u){return t?o?.flatMap(o=>{const{itemsLocation:l,keyPath:h,parameterizedFields:f}=o,p=(0,s().extractItemsWithLocators)({itemsLocation:l,result:t,keyPath:h,parameterizedFields:f}).filter(({key:t})=>t);if(n.default.getBootstrap('web_normalization_rearchitecture_killswitch'))return p;return(0,c().extractParameterizedFieldsFromItems)({normalizedItems:p,variables:u})}):void 0},e.watchNormalizedDependencies=function(t,n,s,c,u){let l,h=!1;const f=c?.map(({key:c,responsePath:p,value:P,keyPath:z,parameterizedFieldsValues:k})=>t.watchNormalizedItem(c,({data:c}={data:void 0})=>{l||(l=t.get(n)?.result||s),c&&(k?.forEach(({key:n,responsePath:s})=>{const u=t.getNormalizedItem(n);u&&(c=(0,o().deepPatch)({responsePath:s,currentObject:c,newData:u.result?.data,insertNewField:!0}))}),l={...l,data:(0,o().deepPatch)({responsePath:p,currentObject:l.data,newData:c,oldData:P,keyPath:z,insertNewField:!0})},h||(h=!0,Promise.resolve().then(()=>{f?.forEach(t=>t()),t.set(n,l,{normalizedItemsLocators:u,skipSetDependencies:!0})})))}))};var n=t(r(d[1]));function o(){const t=r(d[2]);return o=function(){return t},t}function s(){const t=r(d[3]);return s=function(){return t},t}function c(){const t=r(d[4]);return c=function(){return t},t}},"668ebd",["ba7a76","c235f8","99bed7","8866cf","3fe11b"]);
__d(function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.subscriptionToOperationOptions=function(o){return{type:'graphql',operation:o.subscription,variables:{},fetchPolicy:'network-only',dedupePolicy:'no-dedupe',usePOSTForQuery:!1,context:{},skip:!1,queryRef:void 0,deferrable:!1,headers:{},...o}}},"671ad8",[]);
__d(function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.createNiobeHeaders=function(t){return{get:n=>t.get(n),has:n=>t.has(n),toJSON:()=>{}}}},"6e9310",[]);
__d(function(g,r,_i,_a,m,e,d){"use strict";function t(){const n=r(d[0]);return t=function(){return n},n}function n(){const t=r(d[1]);return n=function(){return t},t}function o(){const t=r(d[2]);return o=function(){return t},t}function s(){const t=r(d[3]);return s=function(){return t},t}function a(){const t=r(d[4]);return a=function(){return t},t}function c(t,n){if(t.length<n.length)return!1;for(let o=0;o<n.length;o++)if(t[o]!==n[o])return!1;return!0}Object.defineProperty(e,"__esModule",{value:!0}),e.catchErrorsInResponse=function(i,u,h){if(!i.data)return i;if(!u||!Array.isArray(u)||0===u.length)return i;const{error:f}=i;if(!n().NiobeError.isGraphQLErrors(f)||0===f?.cause?.length)return i;const l=f.cause??[],A=u.flatMap(({itemsLocation:t})=>(0,s().extractItemsWithLocators)({itemsLocation:t,result:i})),p=new Map;for(const t of A){const{responsePath:n}=t,o=n,s=n.join('.');if(p.set(s,{itemPathAddressArray:o}),'catch'===h&&'number'==typeof n[n.length-1]){const t=n.slice(0,-1),o=t.join('.');p.has(o)||p.set(o,{itemPathAddressArray:t})}}const y=Array.from(p.entries()).sort((t,n)=>n[1].itemPathAddressArray.length-t[1].itemPathAddressArray.length),P=new Map,b=[],E=[];for(const t of l){const n=t.path||[];let o=!1;for(const[s,{itemPathAddressArray:a}]of y)if(c(n,a)){const n=P.get(s);n?n.errors.push(t):P.set(s,{itemPathAddressArray:a,errors:[t]}),E.push(t),o=!0;break}o||b.push(t)}let w=i.data;for(const{itemPathAddressArray:s,errors:c}of P.values()){const u=(0,a().getValueAtPath)(i.data,s),h={[t().caughtGraphQLErrorsSymbol]:{data:u,error:new(n().NiobeError)(c)}};w=(0,o().deepPatch)({responsePath:s,currentObject:w,newData:h,insertNewField:!0})}const L='catch'===h?'catchErrors':'resultErrors';return{...i,data:w,error:b.length?new(n().NiobeError)(b):void 0,[L]:E.length?E:void 0}}},"74aeec",["db0b62","00dfad","99bed7","8866cf","83ee38"]);
__d(function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AGENT_FRICTION_HTTP_STATUS_CODE=void 0;e.AGENT_FRICTION_HTTP_STATUS_CODE=423},"7da3d6",[]);
__d(function(g,r,i,a,m,e,d){"use strict";var n=r(d[0]).default;Object.defineProperty(e,"__esModule",{value:!0}),e.getGraphqlGhostingAppealUri=function(n){if(!n.error?.graphQLErrors)return;return n.error.graphQLErrors.map(n=>n.extensions?.response?.body).map(t.default).find(n=>null!=n)};var t=n(r(d[1]))},"81c2d5",["ba7a76","b1cb64"]);
__d(function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.deepMergeExceptArrays=function t(c,n){if(c&&n&&'object'==typeof c&&'object'==typeof n&&!Array.isArray(c)&&!Array.isArray(n))return Object.fromEntries([...Object.entries(c),...Object.entries(n).map(([n,o])=>[n,t(c[n],o)])]);return n}},"81e255",[]);
__d(function(g,r,_i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getValueAtPath=function(t,n){if(0===n.length)return t;if(null==t||'object'!=typeof t)return;let u=t;for(let t=0;t<n.length;t++){const f=n[t];if(null==u||'object'!=typeof u)return;if(Array.isArray(u)){if(!('number'==typeof f&&f>=0&&f<u.length))return;u=u[f]}else{if('string'!=typeof f||!(f in u))return;u=u[f]}}return u}},"83ee38",[]);
__d(function(g,r,i,a,m,e,d){"use strict";function t(){const n=r(d[0]);return t=function(){return n},n}Object.defineProperty(e,"__esModule",{value:!0}),e.extractItemsWithLocators=function({itemsLocation:n,result:o,keyPath:s,parameterizedFields:u}){return n.reduce((o,c,p)=>{const{responseKey:y,typeCondition:l}=c;return o.flatMap(({value:o,responsePath:c})=>{if(!o)return[];if(!o.__typename||l.includes(o.__typename)){const l=o[y];return!l&&p<n.length-1?[]:Array.isArray(l)?l.map((n,o)=>({value:n,responsePath:[...c,y,o],...s&&{keyPath:s,key:(0,t().computeNormalizedCacheKey)(s,n)},...u&&{...u}})):[{value:l,responsePath:[...c,y],...s&&{keyPath:s},...s&&l&&{key:(0,t().computeNormalizedCacheKey)(s,l)},...u&&{parameterizedFields:u}}]}return[]})},[{value:o.data,responsePath:[],...s&&{keyPath:s}}])}},"8866cf",["950b14"]);
__d(function(g,r,i,a,m,e,d){"use strict";var t=r(d[0]).default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.NiobeClient=void 0;var n=r(d[1]),s=r(d[2]),o=r(d[3]);function c(){const t=r(d[4]);return c=function(){return t},t}function u(){const t=r(d[5]);return u=function(){return t},t}function h(){const t=r(d[6]);return h=function(){return t},t}function l(){const t=r(d[7]);return l=function(){return t},t}function f(){const t=r(d[8]);return f=function(){return t},t}function p(){const t=r(d[9]);return p=function(){return t},t}function y(){const t=r(d[10]);return y=function(){return t},t}function b(){const t=r(d[11]);return b=function(){return t},t}function R(){const t=r(d[12]);return R=function(){return t},t}function w(){const t=r(d[13]);return w=function(){return t},t}function v(){const t=r(d[14]);return v=function(){return t},t}function O(){const t=r(d[15]);return O=function(){return t},t}function S(){const t=r(d[16]);return S=function(){return t},t}function E(){const t=r(d[17]);return E=function(){return t},t}function I(){const t=r(d[18]);return I=function(){return t},t}function k(){const t=r(d[19]);return k=function(){return t},t}function T(){const t=r(d[20]);return T=function(){return t},t}function x(){const t=r(d[21]);return x=function(){return t},t}function C(){const n=t(r(d[22]));return C=function(){return n},n}function N(){const t=r(d[23]);return N=function(){return t},t}function A(){const t=r(d[24]);return A=function(){return t},t}function Q(){const t=r(d[25]);return Q=function(){return t},t}function L(){const t=r(d[26]);return L=function(){return t},t}function M(){const t=r(d[27]);return M=function(){return t},t}function P(){const n=t(r(d[28]));return P=function(){return n},n}function q(){const t=r(d[29]);return q=function(){return t},t}function D(){const t=r(d[30]);return D=function(){return t},t}function _(){const t=r(d[31]);return _=function(){return t},t}function z(){const t=r(d[32]);return z=function(){return t},t}function $(){const t=r(d[33]);return $=function(){return t},t}function U(){const t=r(d[34]);return U=function(){return t},t}function F(){const t=r(d[35]);return F=function(){return t},t}function j(){const t=r(d[36]);return j=function(){return t},t}class G{constructor({hydrationData:t=[],fetch:o,generateRandomString:c,flagger:u,metricReporter:h,jitneyLogger:l,cacheMaxSize:p=f().DEFAULT_CACHE_MAX_SIZE,cache:y=new(f().NiobeCache)({hydrationData:t,maxSize:p,metricReporter:h}),inflight:b=new Map,retryOnNetworkError:R=!0,retryDelay:w,extraHeaders:v={},disablePrepare:S=!1,getRenderingState:E,apiGatewayURL:k,fetchStatusMessageTarget:T,webSocketClient:x,usePOSTForQueries:N=!1,isRuntimeResponseMockingEnabled:A=!0,synchronousResolver:Q,clearPersistentCache:L=C().default}){this.type='minimalist',this.cache=void 0,this.inflight=void 0,this.flagger=void 0,this.metricReporter=void 0,this.jitneyLogger=void 0,this.fetch=void 0,this.generateRandomString=void 0,this.getRenderingState=void 0,this.retryOnNetworkError=void 0,this.retryDelay=void 0,this.retriers=[['recaptchaRetrier',I().recaptchaRetrier],['airlockRetrier',s.airlockRetrier],['agentFrictionRetrier',n.agentFrictionRetrier],['networkErrorRetrier',O().networkErrorRetrier]],this.extraHeaders=void 0,this.disablePrepare=void 0,this.apiGatewayURL=void 0,this.webSocketClient=void 0,this.usePOSTForQueries=void 0,this.transformedOptions=void 0,this.isRuntimeResponseMockingEnabled=void 0,this.synchronousResolver=void 0,this.clearPersistentCache=void 0,this.fetchStatusMessageTarget=void 0,this.webSocketMultiAbortController=void 0,this.webSocketSubscription=void 0,this.isDirectCacheAccessAllowed=!0,this.cache=y,this.inflight=b,this.retryOnNetworkError=R,this.retryDelay=w,this.getRenderingState=E,this.flagger=u,this.metricReporter=h,this.jitneyLogger=l,this.extraHeaders=v,this.disablePrepare=S,this.fetch=o,this.generateRandomString=c,this.apiGatewayURL=k||'',this.transformedOptions=new WeakMap,this.webSocketClient=x,this.usePOSTForQueries=N,this.isRuntimeResponseMockingEnabled=A,this.synchronousResolver=Q,this.clearPersistentCache=L,this.fetchStatusMessageTarget=T}preloadQuery(t){const n=(0,$().queryToOperationOptions)(t);return this.execute(n)}preloadRestQuery(t){return this.execute((0,M().getOptionsToRESTOptions)(t))}prefetchPreloadQuery(t){const n=(0,$().queryToOperationOptions)(t);return this.execute({...n,context:{type:'prefetch',...n.context,headers:{'x-airbnb-prefetch':'true',...n.context.headers},fetchOptions:{...n.context.fetchOptions,type:'prefetch'}}})}async query(t){const n=(0,$().queryToOperationOptions)(t),s=await this.execute(n).promise;if(t.unsafe__shouldThrowErrors&&s.error?.networkError)throw s.error.networkError;return s}async prefetchQuery(t){return this.prefetchPreloadQuery(t).promise}readQuery(t){return t.queryRef?t.queryRef.result?.data??null:this.readResult((0,$().queryToOperationOptions)(t))?.data??null}writeQuery(t){const n=this.transformOptions((0,$().queryToOperationOptions)(t)),s={data:t.data},o=h().NiobeQueryRef.for({options:(0,$().queryToOperationOptions)(t),promise:Promise.resolve(s),result:s,clientType:this}),{promise:c}=o;this.processResult({transformedOptions:n,result:s,promise:c,source:'manual'})}unsafe__writeQuery(t){if(!this.isDirectCacheAccessAllowed){const n=t.query.name;(0,u().warnNiobeError)((0,u().directCacheAccessDuringOptimisticUpdateError)(n))}this.writeQuery(t)}readItem({typename:t,keyField:n,id:s,excludeOptimisticData:o=!1}){const c=`${t}.${n}:${s}`,u=this.cache.getNormalizedItem(c);if(!u)return null;const h=o?u?.result:u?.resultWithOptimisticData;return h?.data??null}writeItem({typename:t,keyField:n,id:s,data:o}){const c=`${t}.${n}:${s}`;this.cache.setNormalizedItem(c,{data:o})}unsafe__readItem(t){return this.readItem({...t,excludeOptimisticData:!1})}unsafe__writeItem(t){this.isDirectCacheAccessAllowed||(0,u().warnNiobeError)((0,u().directCacheAccessDuringOptimisticUpdateError)(t.typename)),this.writeItem(t)}handleOptimisticResponse({optimisticResponse:t,update:n,mutation:s,variables:o}){if(!t)return _().noop;const c={data:t},h=(0,N().computeOperationCacheKey)(s,o),{normalizedItemsLocators:l}=s;if(!n){const t=(0,S().extractNormalizedItems)(c,l,o);if(!t?.length)return(0,u().warnNiobeError)((0,u().optimisticResponseWithoutNormalizedItemsError)(s.name)),_().noop}const p=[],y=(0,f().cacheOptimisticResult)(this.cache,{cacheKey:h,variables:o,normalizedItemsLocators:l,result:c});if(p.push(y),n){const t={readItem:this.readItem.bind(this),readQuery:this.readQuery.bind(this),writeItem:t=>{const n=(0,f().cacheOptimisticItem)(this.cache,t);p.push(n)},writeQuery:({query:t,variables:n,data:s})=>{const o=(0,N().computeOperationCacheKey)(t,n),{normalizedItemsLocators:c}=t,u=(0,f().cacheOptimisticResult)(this.cache,{cacheKey:o,variables:n,normalizedItemsLocators:c,result:{data:s}});p.push(u)}};this.isDirectCacheAccessAllowed=!1,n(t,c),this.isDirectCacheAccessAllowed=!0}return()=>p.forEach(t=>t())}async mutate(t){const n=this.handleOptimisticResponse(t),s=(0,D().mutationToOperationOptions)(t),o=await this.execute(s).promise;if(o.error&&t.unsafe__shouldThrowErrors){const t=(0,z().parseMutationErrorToThrow)(o.error);if(t)throw n(),t}if(!o.error&&t.update){const n={readItem:t=>this.readItem({...t,excludeOptimisticData:!0}),readQuery:t=>{const n=(0,$().queryToOperationOptions)(t);return this.readResult({...n,excludeOptimisticData:!0})?.data??null},writeItem:this.writeItem.bind(this),writeQuery:this.writeQuery.bind(this)};t.update(n,o)}return n(),o}createWebSocketSubscription(t){const{webSocketClient:n}=this;if(!n)throw new Error('no websocket client');if(this.webSocketSubscription&&!this.webSocketMultiAbortController?.aborted)return this.webSocketMultiAbortController?.addSignal(t),this.webSocketSubscription;this.webSocketMultiAbortController=new(w().MultiAbortController)({waitTick:!0}),this.webSocketMultiAbortController.addSignal(t);const s=n.subscribe('graphql_subscription',this.webSocketMultiAbortController.signal),o=t=>{'disconnected'!==t.state?(this.webSocketSubscription=t,t.next?.then(o)):this.webSocketSubscription=void 0};return o(s),s}async initiateGraphQLSubscription(t,n){const s=await this.execute((0,F().subscriptionToOperationOptions)({...t,headers:{...t.headers,'x-airbnb-websocket-connection-id':n}})).promise,o=s.extensions?.subscription?.subscriptionId;return o||((0,u().reportNiobeError)((0,u().missingSubscriptionId)(t.subscription.name)),(0,u().throwNiobeError)((0,u().missingSubscriptionId)(t.subscription.name))),{subscriptionId:o,result:s,error:void 0}}async*subscribe(t){const{signal:n,delay:s}=t;if(s&&await new Promise(t=>{setTimeout(t,s)}),n.aborted)return;let o=this.createWebSocketSubscription(n);for(yield{state:'pending'};'pending'===o.state||'reconnecting'===o.state;)o=await o.next;if('disconnected'===o.state){const{sourceError:t}=o,{wasClean:n,code:s,reason:c}=t;return void(n?yield{state:'disconnected'}:yield{state:'error',error:new Error(`${s} - ${c}`)})}const{connection:c}=o,h=this.initiateGraphQLSubscription(t,c.connectionId),{result:l,subscriptionId:p,error:y}=await h.catch(t=>({subscriptionId:void 0,result:void 0,error:t}));if(void 0===p)return void(yield{state:'error',error:y});yield{state:'established'},l?.data&&(yield{state:'message',data:l});const R=()=>this.unsubscribe(p);function w(t){return t.extensions?.subscription?.subscriptionId===p}for(n.addEventListener('abort',R,{once:!0}),o=await o.next;o;){if('established'===o.state)yield{state:'established'};else if('reconnecting'===o.state)yield{state:'reconnecting'};else if('disconnected'===o.state){const{sourceError:t}=o,{wasClean:n,code:s,reason:c}=t;if(n)yield{state:'disconnected'};else{const t=new Error(`${s} - ${c}`);yield{state:'error',error:t}}}else if('message'===o.state){const{message:n}=o;try{const s=JSON.parse(n);if(w(s)){const{subscriptionCacheKey:n,normalizedItemsLocators:o}=(0,b().computeSubscriptionNormalizationIdentifiers)(t);(0,f().cacheResult)(this.cache,{key:n,result:s,normalizedItemsLocators:o}),yield{state:'message',data:s}}}catch{(0,u().warnNiobeError)((0,u().unparseableSubscriptionMessage)(n))}}o=await o.next}o||n.aborted||(R(),yield{state:'resubscribing'},yield*this.subscribe({...t,delay:Math.min(3e4,s?2*s:100)}))}async unsubscribe(t){this.mutate({mutation:x().UnsubscribeMutationOperation,variables:{subscriptionId:t}})}extract(){return this.cache.serialize()}invalidate({query:t,variables:n}){const{cache:s}=this,o=t.name,c=(0,N().computeOperationCacheKey)(t,n);s.invalidate({keyPrefix:c});const{operationId:u}=t;if((0,P().default)(o,this.flagger)&&u){const t=`${(0,Q().getHostAndPath)(this.apiGatewayURL)}/${o}/${u}`,s=(0,q().mergeURLSearchParams)({operationName:o,...(0,L().getLocaleAndCurrencyQueryString)(),...n?{variables:JSON.stringify(n)}:{},extensions:JSON.stringify({persistedQuery:{version:E().OPERATION_REGISTRY_VERSION,sha256Hash:u}})}),c=(0,A().formatUrl)(t,s);this.clearPersistentCache?.(c)}}updateCache(t){t.forEach(([t,{normalizedItemsLocators:n,...s}])=>{(0,f().cacheResult)(this.cache,{key:t,result:s,normalizedItemsLocators:n})})}readResult(t){const{queryRef:{clientType:n}={}}=t;if(n&&n!==this&&(0,u().throwNiobeError)((0,u().receivedQueryRefForWrongClient)(this,n)),t.queryRef){const n=this.transformOptions(t.queryRef.options),[,s]=this.syncResolve(n)||[];return s??t.queryRef.result??void 0}const s=this.transformOptions(t),[,o]=this.syncResolve(s)||[];return o}watchOnce(t,n){const{options:s}=t;return s.skip?_().noop:this.cache.watch(this.transformOptions(s).key,t=>{const o=t?h().NiobeQueryRef.for({promise:Promise.resolve(t),result:t,clientType:this,options:s,deferred:t.deferred}):this.execute(s);n(o)})}executeFrom({queryRef:t,options:n}){const{options:s}=t;return this.execute({...s,...n,variables:{...s.variables,...n.variables}})}transformOptions(t){const{metricReporter:n,metricReporter:{now:s},extraHeaders:o,apiGatewayURL:c,generateRandomString:u,usePOSTForQueries:h,flagger:f}=this;const y=this.transformedOptions.get(t);if(y)return y;const R=(function(){if('rest'===t.type){const c=(0,T().timeoutSignalTransform)((0,l().abortSignalTransform)((0,v().metricsTransform)(t,s,u))),h=(0,p().contextRESTTransform)(c,o,n,t.excludeLocaleAndCurrencySearchParams);return(0,b().identifyRESTTransform)(h)}const y=(0,T().timeoutSignalTransform)((0,l().abortSignalTransform)((0,v().metricsTransform)(t,s,u))),R=(0,b().identifyGraphQLTransform)(y),w=(0,E().operationRegistryTransform)(R,h);return(0,p().contextGraphqlTransform)(w,o,n,c,f)})();return this.transformedOptions.set(t,R),R}syncResolve(t){const n=(0,k().skipResolver)(t);if(n)return['skip',n];const{cache:s}=this,o=(0,f().cacheResolver)(s,t,this.getRenderingState);if(o){return[o.fromPrefetch?'cache-prefetch':'cache',o.result]}const c=this.synchronousResolver?.(t);return c?['injected-sync-resolve',c]:'cache-only'===t.fetchPolicy?['cache-only-miss',{data:void 0}]:void 0}asyncResolve(t,n){const{inflight:s,cache:o,fetch:u,flagger:h,metricReporter:l,jitneyLogger:p,generateRandomString:b,fetchStatusMessageTarget:w,isRuntimeResponseMockingEnabled:O}=this,S=[],E=b(),I=async t=>{const s=b(),o=await(0,y().httpResolver)({metricReporter:l,fetch:u,fetchStatusMessageTarget:w,clientRequestId:s,options:t,isRuntimeResponseMockingEnabled:O,flaggerClient:h});return S.push(s),(0,v().reportAPIResponseMetrics)({flagger:h,jitneyLogger:p,apiEventAttemptId:s,result:o,options:t,apiRequestId:E}),o.metrics&&(o.metrics.requestEventIds=S),c().NiobeError.isAbortError(o.error)||(0,U().redirectOnKrakenAuthenticationError)(o)?o:this.maybeRetry(n,t,o,I)},k=(0,R().inflightQueryResolver)(s,t)?.then(n=>c().NiobeError.isAbortError(n.error)&&!t.multiAbortController.aborted?I(t):n);if(k)return['network-dedupe',k];const T=(0,f().cacheDeferredResolver)(o,t);return T?['cache-deferred',T]:['network',I(t)]}async maybeRetry(t,n,s,o){const c=3+(0,O().getTotalNetworkErrorRetrierAttempts)(),u=n.context?.attemptsCount??2;if(u>=c)return s;const h=this.getRetrier(s,n);if(!h)return s;const l=await h.context;if(!l)return s;return o(this.transformOptions({...t,dedupePolicy:'no-dedupe',context:{...t.context,...l,attemptsCount:u+1,clientTraceId:n.context.clientTraceId}}))}getRetrier(t,n){const s={niobeClient:this,result:t,options:n,retryOnNetworkError:this.retryOnNetworkError,retryDelay:this.retryDelay,flagger:this.flagger,metricReporter:this.metricReporter,jitneyLogger:this.jitneyLogger};let o;for(const[t,n]of this.retriers)if(o=o??n(s),o)return this.metricReporter.increment('niobe.retriers.retry_signaled',1,{retrier:t}),o}processResult({transformedOptions:t,result:n,promise:s,source:c}){const{cache:u,inflight:h,metricReporter:l,jitneyLogger:p,getRenderingState:y}=this;if('skip'===c)return;const b=[n=>(0,R().storeInflightQuery)(h,t,n),()=>(0,f().cacheDeferredSentinel)(u,t,y)];b.forEach(t=>t(s));const w='graphql'===t.type?t.operation.normalizedItemsLocators:[],O=[n=>{'cache'!==c&&'cache-only-miss'!==c&&(0,f().cacheResult)(u,{...t,result:n,normalizedItemsLocators:w})},()=>(0,R().clearInflightQuery)(h,t),n=>{n?.error&&(0,P().default)(t.operationName,this.flagger)&&this.clearPersistentCache?.(t.fetchUrl)},n=>{const s=l.now();(0,v().reportCacheMetrics)(p,t,n,c,s)},t=>{if(t.extensions?.traceId){const n=t.error?'error':'success';(0,o.saveTraceId)(t.extensions?.traceId,n)}}];n?O.forEach(t=>t(n)):s.then(t=>O.forEach(n=>n(t)))}execute(t){if(t.queryRef)return t.queryRef;const n=this.transformOptions(t),[s,o]=(()=>{const s='deferrable'in t&&t.deferrable,o=this.syncResolve(n);if(o){const[n,c]=o;return[n,h().NiobeQueryRef.for({promise:Promise.resolve(c),result:c,clientType:this,options:t,deferred:s})]}const[c,u]=this.asyncResolve(n,t),l=u.then(t=>(0,j().transformResponse)(t,n.operation));return[c,h().NiobeQueryRef.for({promise:l,clientType:this,options:t,deferred:s})]})();return this.processResult({transformedOptions:n,result:o.result||void 0,promise:o.promise,source:s}),o}}e.NiobeClient=G;e.default=G},"8889e8",["ba7a76","2f7cf3","a145d5","f2f40f","00dfad","07f19c","ee1cae","41c843","8f864f","abc507","f9267b","5b3464","459e51","b3b435","b80b94","b7fb26","668ebd","c0fdc0","f5568d","0c3d76","096956","ceadbe","e15052","34be0f","45f45a","f8aa06","4c8a33","a0a6de","d8c0f0","ab4631","91eae7","48048d","f9de9f","043517","bf6bc6","671ad8","c948ba"]);
__d(function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(u){if(u.response?.status===t.AGENT_FRICTION_HTTP_STATUS_CODE){const t=u.error?.networkError?.result,c=u.error?.networkError?.body;if(n(t)&&c)return{...t,frictionId:o(c,t.frictionId)}}return null};var t=r(d[0]);function n(t){const n=t?.frictionId;return Boolean(n)||0===n}function o(t,n){if('string'==typeof n)return n;const o=t.match(/"frictionId":\s*(\d+)/);return o?.[1]||String(n)}},"8be4f5",["7da3d6"]);
__d(function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.extractViewName=function(t,n){let l=null;if(n){const{friction_data:n}=t;l=(n||[])[0]?.name||null}else{const{viewPayload:n}=t;l='AirlockFlowViewPayload'===n?.__typename?n.flowView:n.frictionView}return l}},"8cd0d8",[]);
__d(function(g,r,i,a,m,e,d){'use strict';Object.defineProperty(e,"__esModule",{value:!0});e.ApiOperationType={query:1,mutation:2,subscription:3}},"8da96c",[]);
__d(function(g,r,i,a,m,e,d){"use strict";function t(){const s=r(d[0]);return t=function(){return s},s}function s(){const t=r(d[1]);return s=function(){return t},t}function o(){const t=r(d[2]);return o=function(){return t},t}Object.defineProperty(e,"__esModule",{value:!0}),e.NiobeCache=e.DEFAULT_CACHE_MAX_SIZE=void 0,e.cacheDeferredResolver=function(t,{key:s,deferrable:o,fetchPolicy:c,excludeOptimisticData:h}){if(!o)return;if('network-only'===c||'no-cache'===c||'cache-and-network'===c)return;const n=t.get(s),l=h?n?.result:n?.resultWithOptimisticData;if(!l)return;if(!l.deferred)return Promise.resolve(l);return new Promise(o=>{t.watch(s,t=>{t&&o(t)})})},e.cacheDeferredSentinel=function(t,{key:s,deferrable:o},c){o&&'server-render'===c()&&t.set(s,{data:void 0,deferred:!0})},e.cacheOptimisticItem=function(t,{typename:s,keyField:o,id:c,data:h}){const n=`${s}.${o}:${c}`,l=Symbol(`optimistic-${n}`);return t.setNormalizedItem(n,{data:h},{optimisticCacheKey:l}),()=>{t.setNormalizedItem(n,void 0,{optimisticCacheKey:l})}},e.cacheOptimisticResult=function(t,{cacheKey:o,variables:c,normalizedItemsLocators:h,result:n}){const l=(0,s().extractNormalizedItems)(n,h,c),u=Symbol(`optimistic-${o}`);return t.set(o,n,{normalizedItemsLocators:h,optimisticCacheKey:u,variables:c}),()=>{if(t.set(o,void 0,{optimisticCacheKey:u,variables:c}),l?.length){const s=l.map(({parameterizedFieldsValues:t,...s})=>({...s,value:void 0,parameterizedFieldsValues:t?.map(t=>({...t,value:void 0}))}));t.setDependencies(s,{optimisticCacheKey:u})}}},e.cacheResolver=function(t,{key:s,fetchPolicy:o,maxAge:c,queryRef:h,excludeOptimisticData:n},l){if(h){const{result:t}=h;return t&&!t.deferred?{result:t,fromPrefetch:!1}:void 0}if('network-only'===o||'no-cache'===o)return;if('cache-and-network'===o&&'client-hydration'!==l())return;const u=t.get(s,{maxAge:c}),f=n?u?.result:u?.resultWithOptimisticData;if(!f||f?.deferred)return;return{result:f,fromPrefetch:Boolean(u?.fromPrefetch)}},e.cacheResult=function(s,{key:o,result:c,fetchPolicy:h,normalizedItemsLocators:n,variables:l,context:{type:u}={}}){if('no-cache'===h)return;if(c.deferred)return;if(c.error&&!s.get(o)?.result?.deferred)return;if(c.error&&t().NiobeError.isSSRTimeoutError(c.error))return;if(c.catchErrors?.length||c.resultErrors?.length)return;s.set(o,c,{fromPrefetch:'prefetch'===u,normalizedItemsLocators:n,variables:l})};const c=e.DEFAULT_CACHE_MAX_SIZE=268435456,h=null;class n{constructor(t){this.key=void 0,this.size=void 0,this.result=void 0,this.resultWithOptimisticData=void 0,this.variables=void 0,this.normalizedItemsLocators=void 0,this.optimisticData=void 0,this.createdAt=void 0,this.fromPrefetch=void 0,this.watchers=void 0,this.key=t,this.watchers=[],this.size=0,this.fromPrefetch=!1}setResult(t,{fromPrefetch:s=!1,optimisticCacheKey:c,now:h}){const n=this.resultWithOptimisticData;if(c?this.setOptimisticResult(c,t):(this.result=t,this.fromPrefetch=s),this.optimisticData?.size){const t=[...this.optimisticData.values()].reduce((t,s)=>s?(0,o().deepMergeExceptArrays)(t,s):t,this.result?.data);this.resultWithOptimisticData={...this.result,data:t}}else this.resultWithOptimisticData=this.result;const l=void 0===t,u=JSON.stringify(this.resultWithOptimisticData?.data),f=u!==JSON.stringify(n?.data);this.size=this.resultWithOptimisticData?.data?u.length:0,this.createdAt=h(),(f||l)&&this.notify()}setOptimisticResult(t,s){if(!s)return this.optimisticData?.delete(t),void(0===this.optimisticData?.size&&(this.optimisticData=void 0));this.optimisticData||(this.optimisticData=new Map),this.optimisticData.set(t,s?.data)}setNormalizedItemsLocators(t){this.normalizedItemsLocators=t}setVariables(t){this.variables=t}isCollectable(){return 0===this.watchers.length}watch(t){const s=this;return s.watchers=s.watchers.concat(t),function(){s.watchers=s.watchers.filter(s=>s!==t)}}notify(){const{watchers:t,resultWithOptimisticData:s}=this;this.watchers=[],t.forEach(t=>t(s))}}e.NiobeCache=class{constructor({hydrationData:t,metricReporter:s,maxSize:o=c}){this.data=void 0,this.normalizedItems=void 0,this.size=void 0,this.maxSize=void 0,this.lastTouchedEntry=void 0,this.metricReporter=void 0,this.data=new Map,this.normalizedItems=new Map,this.size=0,this.maxSize=o,this.metricReporter=s,t.forEach(([t,{normalizedItemsLocators:s,variables:o,...c}])=>{this.set(t,c,{normalizedItemsLocators:s,variables:o})})}serialize(){return Array.from(this.data.entries()).reduce((t,[s,o])=>{if(o!==h&&void 0!==o.result){const{variables:c,normalizedItemsLocators:h,result:n}=o,{data:l,error:u,deferred:f}=n;t.push([s,{data:l,error:u,deferred:f,variables:c,normalizedItemsLocators:h}])}return t},[])}get(t,{maxAge:s}={}){const o=this.data.get(t);if(o===h&&this.metricReporter.increment('frontend.niobe.mini_cache_miss',1,{}),!o)return;const{createdAt:c}=o;return c&&s&&this.metricReporter.now()-1e3*s>c?void 0:(this.touch(o),o)}getNormalizedItem(t){const s=this.normalizedItems.get(t);if(s===h&&this.metricReporter.increment('frontend.niobe.mini_cache_miss',1,{}),s)return this.touchNormalizedItem(s),s}set(t,o,{fromPrefetch:c=!1,normalizedItemsLocators:h,variables:l,skipSetDependencies:u,optimisticCacheKey:f}={}){const p=this.data.get(t),z=p??new n(t);z.setVariables(l),h&&z.setNormalizedItemsLocators(h),z.setResult(o,{fromPrefetch:c,optimisticCacheKey:f,now:this.metricReporter.now});const y=(0,s().extractNormalizedItems)(o,h,l);y&&(u||this.setDependencies(y,{optimisticCacheKey:f}),o&&!f&&(0,s().watchNormalizedDependencies)(this,t,o,y,h)),this.touch(z),this.size+=z.size-(p?.size??0),this.prune()}setDependencies(t,{optimisticCacheKey:s}={}){t?.forEach(({key:t,value:o,parameterizedFieldsValues:c})=>{c?.forEach(t=>this.setNormalizedItem(t.key,{data:t.value},{optimisticCacheKey:s})),this.setNormalizedItem(t,{data:o},{optimisticCacheKey:s})})}setNormalizedItem(t,s,{optimisticCacheKey:c}={}){const h=this.normalizedItems.get(t),l=h??new n(t);if(c)l.setResult(s,{optimisticCacheKey:c,now:this.metricReporter.now});else{const t=(0,o().deepMergeExceptArrays)(h?.result?.data,s?.data);l.setResult({...s,data:t},{now:this.metricReporter.now})}this.touchNormalizedItem(l),this.size+=l.size-(h?.size??0),this.prune()}watch(t,s){const{data:o}=this,c=o.get(t)??new n(t);return o.set(t,c),c.watch(s)}watchNormalizedItem(t,s){const{normalizedItems:o}=this,c=o.get(t)??new n(t);return o.set(t,c),c.watch(s)}invalidate({keyPrefix:t}){[...this.data.keys()].filter(s=>s.startsWith(t)).forEach(t=>{this.set(t,void 0)})}clear(){this.data.clear(),this.normalizedItems.clear(),this.size=0,this.lastTouchedEntry=void 0}delete(t){const s=this.data.get(t);s&&(this.data.set(t,h),this.size-=s.size)}deleteNormalizedItem(t){const s=this.normalizedItems.get(t);s&&(this.normalizedItems.set(t,h),this.size-=s.size)}touch(t){t!==this.lastTouchedEntry&&(this.lastTouchedEntry=t,this.data.delete(t.key),this.data.set(t.key,t))}touchNormalizedItem(t){t!==this.lastTouchedEntry&&(this.lastTouchedEntry=t,this.normalizedItems.delete(t.key),this.normalizedItems.set(t.key,t))}prune(){if(!(this.size<=this.maxSize)){for(const[t,s]of this.normalizedItems){if(this.size<=this.maxSize)return;s!==h&&s.isCollectable()&&this.deleteNormalizedItem(t)}for(const[t,s]of this.data){if(this.size<=this.maxSize)return;s!==h&&s.isCollectable()&&this.delete(t)}}}}},"8f864f",["00dfad","668ebd","81e255"]);
__d(function(g,r,i,a,_m,e,d){"use strict";var t=r(d[0]).default;Object.defineProperty(e,"__esModule",{value:!0}),e.maybeGetRecaptchaV3TokenHeader=void 0;var o=t(r(d[1])),n=r(d[2]),s=r(d[3]),c=r(d[4]);const u=()=>{};e.maybeGetRecaptchaV3TokenHeader=(t,l,p,h=!1)=>{const m=(0,s.getBotDetectionConfigForUrl)(t);if(null===m)return u;if(!m.methods.map(t=>t.toUpperCase()).includes(l.toUpperCase()))return u;if(o.default.getBootstrap('trust_ai_disable_recaptchav3'))return u;if(h)return u;const f={action:m.actionName||(0,n.getNotSetEndpointActionName)(m.endpoint?.slice(1)),...m.timeout&&{timeoutInMs:m.timeout},...m.shouldThrow&&{shouldThrow:m.shouldThrow},...m.retries&&{maxRetries:m.retries},isPlatformized:p};return()=>(0,c.getRecaptchaV3TokenHeader)(f)}},"913737",["ba7a76","c235f8","336c95","46fe00","fa27ff"]);
__d(function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.mutationToOperationOptions=function(o){return{type:'graphql',operation:o.mutation,variables:void 0,fetchPolicy:'network-only',dedupePolicy:'no-dedupe',usePOSTForQuery:!1,context:{},skip:!1,queryRef:void 0,deferrable:!1,headers:{},...o}}},"91eae7",[]);
__d(function(g,r,i,a,m,e,d){"use strict";function t(){const n=r(d[0]);return t=function(){return n},n}Object.defineProperty(e,"__esModule",{value:!0}),e.computeNormalizedCacheKey=function(n,u){const c=(0,t().getKeyPathValue)(n,u);return c?`${u.__typename}.${n}:${c}`:''}},"950b14",["1e477a"]);
__d(function(g,r,i,a,m,e,d){"use strict";function t(){const n=r(d[0]);return t=function(){return n},n}function n(){const t=r(d[1]);return n=function(){return t},t}Object.defineProperty(e,"__esModule",{value:!0}),e.deepPatch=function o({responsePath:c,currentObject:u,newData:s,oldData:l,keyPath:f,insertNewField:h}){if(0===c.length){if(f){if((0,n().getKeyPathValue)(f,u)!==(0,n().getKeyPathValue)(f,s))return u}return s}const[y,...P]=c;if('number'==typeof y)return Array.isArray(u)?!u[y]&&l?u:[...u.slice(0,y),o({responsePath:P,currentObject:u[y],newData:s,oldData:l,keyPath:f,insertNewField:h}),...u.slice(y+1)]:((0,t().warnNiobeError)((0,t().invalidNormalizationPatch)()),u);if('string'==typeof y)return'object'!=typeof u||!u||Array.isArray(u)?((0,t().warnNiobeError)((0,t().invalidNormalizationPatch)()),u):u[y]||h?{...u,[y]:o({responsePath:P,currentObject:u[y],newData:s,oldData:l,keyPath:f,insertNewField:h})}:u;(0,t().warnNiobeError)((0,t().invalidNormalizationPatch)())}},"99bed7",["07f19c","1e477a"]);
__d(function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.redirectToAirlockIfFullpage=function(f,k){if((0,c.isFullpage)(f)){const s=(0,l.isLegacyAirlock)(f);if(k){const l=(0,t.extractViewName)(f,s);(0,n.logRetrierCancelled)(k,'fullpageRedirect',s,l)}return s?(0,u.redirectToAirlock)((0,c.getFullpageURL)(f)):((0,o.logAirlockLifecycleEvent)('FULL_PAGE_REDIRECT',f),(0,u.redirectToAirlock)(`/airlock/${f.internalAirlockId}`)),!0}return!1};var l=r(d[0]),c=r(d[1]),t=r(d[2]),o=r(d[3]),n=r(d[4]),u=r(d[5])},"9f2c9e",["1700a4","6cfeca","8cd0d8","593e28","40f641","e91c21"]);
__d(function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getOptionsToRESTOptions=function(t){return{type:'rest',body:void 0,context:{},deferrable:!1,fetchPolicy:'cache-first',dedupePolicy:'GET'===t.method||void 0===t.method?'dedupe-inflight':'no-dedupe',headers:{},method:'GET',skip:!1,queryRef:void 0,...t}}},"a0a6de",[]);
__d(function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"AIRLOCK_REPLAY_HEADER",{enumerable:!0,get:function(){return n.AIRLOCK_REPLAY_HEADER}}),Object.defineProperty(e,"airlockRetrier",{enumerable:!0,get:function(){return t.airlockRetrier}}),Object.defineProperty(e,"buildAirlockPermitV2Header",{enumerable:!0,get:function(){return u.buildAirlockPermitV2Header}}),Object.defineProperty(e,"logRequestReplayEvent",{enumerable:!0,get:function(){return o.logRequestReplayEvent}});var t=r(d[0]),n=r(d[1]),u=r(d[2]),o=r(d[3])},"a145d5",["24eb52","f3d6f1","25f264","593e28"]);
__d(function(g,r,i,a,m,e,d){'use strict';Object.defineProperty(e,"__esModule",{value:!0});var l=e.AirlockPlatformAirlockLifecycleEvent={defaultProps:{schema:'com.airbnb.jitney.event.logging.AirlockPlatform:AirlockPlatformAirlockLifecycleEvent:2.0.0',event_name:'airlockplatform_airlock_lifecycle'},propTypes:{}};l.fullyQualifiedName='AirlockPlatform.v2.AirlockPlatformAirlockLifecycleEvent';e.AirlockPlatformAirlockLifecycleEventEvent=function(c){return{eventData:c,eventDataSchema:l}}},"a4ed0f",[]);
__d(function(g,r,i,a,m,e,d){"use strict";var t=r(d[0]).default;Object.defineProperty(e,"__esModule",{value:!0}),e.createTimeoutSignal=function(t){if(void 0===t||t<=0)return;if(n=AbortSignal,'timeout'in n)return AbortSignal.timeout(t);var n;const o=new AbortController;return setTimeout(()=>o.abort('undefined'!=typeof DOMException?new DOMException('signal timed out','TimeoutError'):'signal timed out'),t),o.signal};t(r(d[1]))},"a9e08c",["ba7a76","58861b"]);
__d(function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.mergeURLSearchParams=function(...n){const t=n.filter(Boolean);return t.length?1===t.length?new URLSearchParams(t[0]):new URLSearchParams(t.flatMap(n=>n instanceof URLSearchParams?[...n.entries()]:Array.isArray(n)?n:[...new URLSearchParams(n).entries()])):void 0}},"ab4631",[]);
__d(function(g,r,i,a,m,e,d){"use strict";var t=r(d[0]).default;Object.defineProperty(e,"__esModule",{value:!0}),e.contextGraphqlTransform=function(t,n,c,f,h){const{context:C,operationName:A,operation:_,fetchPolicy:X}=t,x=`${(0,p().getHostAndPath)(f)}/${A}/${_.operationId}`,R=(0,P().mergeURLSearchParams)({operationName:A,...(0,b().getLocaleAndCurrencyQueryString)(C)},C?.searchParams),T=o.default.get('layout-init'),v=(0,l().formatUrl)(x,R),F=S(x,C?.fetchOptions?.method??'POST',c),L=C?.fetchOptions&&'body'in C.fetchOptions?C.fetchOptions.body:void 0;return{...t,fetchUrl:v,context:{...C,searchParams:R,asyncHeaders:F,fetchOptions:{...C?.fetchOptions,body:L,headers:{...n,...C?.headers,...C?.fetchOptions?.headers,...t.headers,...O(L),'X-Airbnb-GraphQL-Platform':'web','X-Airbnb-GraphQL-Platform-Client':'minimalist-niobe','X-Niobe-Short-Circuited':'true',...T&&{'X-Client-Version':T?.appVersionFull},...(0,s.isCurrentDomainInChina)()?{[s.chinaPersonalizationHeaderName]:(0,s.loadChinaPersonalizationValueFromLocalStorage)().toString()}:{},...(0,y().default)(A,h)&&'no-cache'!==X&&!u.default.getBootstrap('sw_pwa_disable_niobe_cache')?{'X-Airbnb-SW-Fetch-Policy':X}:{}}}}}},e.contextRESTTransform=function(t,n,o,c){const{context:s,url:u,productContext:f}=t,h=(0,P().mergeURLSearchParams)(c?void 0:(0,b().getLocaleAndCurrencyQueryString)(),s?.searchParams,t.searchParams),p=t.method??s?.fetchOptions?.method??'GET',y=S(u,p,o),C=t.body??s?.fetchOptions?.body;return{...t,fetchUrl:(0,l().formatUrl)(u,h),context:{...s,searchParams:h,asyncHeaders:y,fetchOptions:{...s?.fetchOptions,method:p,body:C,headers:{...O(C),...n,...s?.headers,...s?.fetchOptions?.headers,...t.headers,...f&&{'X-Product-Context':f}}}}}};var n=r(d[1]),o=t(r(d[2])),c=t(r(d[3])),s=r(d[4]),u=t(r(d[5]));function f(){const t=r(d[6]);return f=function(){return t},t}function h(){const t=r(d[7]);return h=function(){return t},t}function l(){const t=r(d[8]);return l=function(){return t},t}function p(){const t=r(d[9]);return p=function(){return t},t}function b(){const t=r(d[10]);return b=function(){return t},t}function y(){const n=t(r(d[11]));return y=function(){return n},n}function P(){const t=r(d[12]);return P=function(){return t},t}function S(t,n,o){const c=(0,h().getRecaptchaPlatformHeaders)(t,n);if(c)return c.then(c=>{if(c)return o.increment('frontend.niobe.recaptcha_v3.append_header',1,{client:'minimalist',endpoint:t,method:n}),c}).catch(t=>{o.increment('frontend.niobe.recaptcha_v3.error',1,{client:'minimalist',status:String(t.statusCode),message:String(t.message)})})}function C(t){return'string'!=typeof t&&null!=t&&('undefined'!=typeof FormData&&t instanceof FormData||'undefined'!=typeof Blob&&t instanceof Blob||t instanceof ArrayBuffer||ArrayBuffer.isView(t)||'undefined'!=typeof ReadableStream&&t instanceof ReadableStream)}function O(t){return{...C(t)?{}:{'Content-Type':'application/json'},'X-Airbnb-API-Key':f().API_KEY,'X-CSRF-Token':(0,c.default)(),'X-CSRF-Without-Token':'1',...(0,n.buildAirlockPermitV2Header)()}}},"abc507",["ba7a76","a145d5","ef2bc3","40eeb7","6d95ce","c235f8","286e0d","f5568d","45f45a","f8aa06","4c8a33","d8c0f0","ab4631"]);
__d(function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return t?.ghostingAppeal?.redirectUri??null}},"b1cb64",[]);
__d(function(g,r,i,a,m,e,d){"use strict";function t(){return 4}function o({attemptsCount:t,retryDelay:o}){const n=void 0===o?2500:o,s=Math.min(n*2**t,6e4);return Math.floor(Math.random()*(s+1))}Object.defineProperty(e,"__esModule",{value:!0}),e.getTotalNetworkErrorRetrierAttempts=t,e.networkErrorRetrier=void 0;e.networkErrorRetrier=({retryOnNetworkError:t,retryDelay:n,options:{context:{networkErrorAttemptsCount:s=0,fetchOptions:u={}}={},operation:p},result:c})=>{if('mutation'===p?.type||'subscription'===p?.type)return;const y=c.response?.headers;if(y&&'true'===y.get('x-airbnb-halt-retry'))return;const f=!c.response||502===c.response.status||503===c.response.status||504===c.response.status;if(t&&f&&s<4){const t=o({attemptsCount:s+=1,retryDelay:n});return{context:new Promise(o=>{setTimeout(o,t)}).then(()=>({networkErrorAttemptsCount:s,fetchOptions:{...u,headers:{...u?.headers,'x-airbnb-retry':String(s)}}})),reason:'networkError'}}}},"b7fb26",[]);
__d(function(g,_r,i,a,m,e,d){"use strict";var t=_r(d[0]).default;function r(){const t=_r(d[1]);return r=function(){return t},t}function n(){const t=_r(d[2]);return n=function(){return t},t}function o(){const t=_r(d[3]);return o=function(){return t},t}function s(){const t=_r(d[4]);return s=function(){return t},t}Object.defineProperty(e,"__esModule",{value:!0}),e.metricsTransform=function(t,r,n){return{...t,context:{...t.context,startTime:r(),eventId:n(),clientTraceId:t?.context?.clientTraceId||n()}}},e.reportAPIResponseMetrics=async function({flagger:t,jitneyLogger:n,apiEventAttemptId:s,apiRequestId:_,result:p,options:u}){const{fetchUrl:h,type:b,operationName:T,context:L}=u,{fetchOptions:x,networkErrorAttemptsCount:I,clientTraceId:A}=L,R=x?.method??'POST';let z;const S=await f(h);if(S){z={response_decompressed_size:E(S),first_byte_time_ms:y(S),network_protocol:k(S),dns_lookup_time_ms:v(S),header_size:w(S)}}if(p.metrics){const{networkStart:t,networkBodyEnd:r,contentLength:n,serverTiming:o,contentType:s}=p.metrics;let c;try{c=JSON.stringify((0,l().parseServerTiming)(o))}catch{c=o}z={...z,response_over_the_wire_size:n??void 0,response_time_ms:Math.floor(r-t),server_timing:c??void 0,content_type:s??void 0}}let q,M;'graphql'===b&&(q=3,M=T);'rest'===b&&(q=2);let O='http://unknown';void 0!==window.location&&(O=window.location.origin??O);const{host:P,pathname:B}=new URL(h,O);n({schema:o().UniversalApiResponseEvent,event_data:{client_trace_id:A,event_id:s,request_id:_,http_status_code:p.response?.status??0,http_method:r().HttpMethodType[R.charAt(0).toUpperCase()+R.slice(1).toLowerCase()],domain_and_path:`${P}${B}`,host:P,path:B,error_code:p.error?.name,api_protocol:q,api_operation_name:M,retry_number:I,...z}});const N=u.context.fetchOptions?.headers,C=N[c.AIRLOCK_REPLAY_HEADER];if(C){const r=u.context.airlockView;(0,c.logRequestReplayEvent)('requestReplayed',{flagger:t,jitneyLogger:n,airlockId:C,viewName:r,fetchUrl:h,requestId:_})}},e.reportCacheMetrics=function(t,r,o,c,p){if('rest'===r.type)return;if('cache'!==c&&'cache-prefetch'!==c&&'network'!==c)return;const{floor:h}=Math,{operationName:l,operationType:f,context:{startTime:y,clientTraceId:v,eventId:w=""},fetchPolicy:E}=r;const k=c.startsWith('cache'),b='cache-prefetch'===c,T=A(r);t({schema:s().UniversalNiobeResponseEvent,event_data:{...(function(){const t=h(p-(y??0)),r={total_response_latency_ms:t,total_latency_ms:t,first_response_latency_ms:t},{metrics:n}=o;if(!n)return{...r,niobe_client_overhead_ms:t};const{networkStart:s,networkBodyEnd:_,payloadParseLatency:u,contentLength:l}=n;if('cache'===c||'cache-prefetch'===c)return{...r,niobe_client_overhead_ms:t,cache_response_byte_size:l||void 0};const f=h(_-s),v=h(t-f);return{...r,network_deserialization_latency_ms:u,network_request_latency_ms:f,network_load_latency_ms:f,network_response_byte_size:l||void 0,cache_response_byte_size:l||void 0,niobe_client_overhead_ms:v}})(),...x(o),...I(r,o),event_id:w,client_trace_id:v,request_event_ids:o.metrics?.requestEventIds??[],operation_name:l,operation_type:n().ApiOperationType[f],request_strategy:R[E],operation_id:r.operation?.operationId,cache_type:k?2:void 0,cached_data_is_exact_match:k,cached_data_is_from_prefetch:k?b:void 0,had_cached_data:T?k:void 0,fetch_priority:'prefetch'===r.context.type?2:1,http_status_code:o.response?.status??0,was_cancelled:r.signal?.aborted||u().NiobeError.isAbortError(o.error),...r.enableAppSessionInstrumentation?{app_logging_context:_.default.getAppLoggingContext()}:{}}})};var c=_r(d[5]),_=t(_r(d[6])),p=t(_r(d[7]));function u(){const t=_r(d[8]);return u=function(){return t},t}function h(){const t=_r(d[9]);return h=function(){return t},t}function l(){const t=_r(d[10]);return l=function(){return t},t}async function f(t){if(!performance?.getEntriesByType)return null;await Promise.resolve();const r=performance.getEntriesByType('resource').filter(r=>r.name.includes(t));return r.length?r[r.length-1]:null}function y(t){return t.responseStart-t.requestStart}function v(t){return t.domainLookupEnd-t.domainLookupStart}function w(t){const r=t.transferSize-t.encodedBodySize;return Math.max(0,r)}function E(t){return t.decodedBodySize}function k(t){return t.nextHopProtocol}function b(t){return t?.errorType?t.errorType:1}function T(t){const{error:r,catchErrors:n,resultErrors:o}=t,{networkError:s,graphQLErrors:c}=r||{},_=[];if(n)for(const t of n)_.push({error_type:4,message:t.message,path:t.path?.join('.')??'',handled_by:1});if(o)for(const t of o)_.push({error_type:4,message:t.message,path:t.path?.join('.')??'',handled_by:2});if(c)for(const t of c)_.push({error_type:4,message:t.message,path:t.path?.join('.')??'',handled_by:3});return s&&_.push({error_type:b(s),message:s.message,handled_by:3,path:''}),_}function L(t){const{error:r,catchErrors:n,resultErrors:o}=t;return r?r.message:n?.length?(0,h().getLocalizedMessageFromGraphQLErrors)(n):o?.length?(0,h().getLocalizedMessageFromGraphQLErrors)(o):''}function x(t){const{error:r,catchErrors:n,resultErrors:o}=t;return Boolean(r&&!u().NiobeError.isAbortError(r)||n?.length||o?.length)?{has_error:!0,unexpected_errors:T(t),fatal_error_message:L(t)}:{has_error:!1,unexpected_errors:[],fatal_error_message:''}}function I(t,r){if('mutation'!==t.operationType)return null;const n='optimisticResponse'in t&&t.optimisticResponse;return{is_optimistic_mutation:Boolean(n),optimistic_response_changed:n?!(0,p.default)(n,r.data):void 0}}function A(t){const{fetchPolicy:r}=t;return['cache-and-network','cache-first','cache-only'].includes(r)}const R={'cache-and-network':'cacheAndNetwork','cache-first':'cacheFirst','cache-only':'cacheOnly','network-only':'networkOnly','no-cache':'noCache'}},"b80b94",["ba7a76","8ad2cc","8da96c","cb55a0","d106a1","a145d5","2bf1de","3dcd9d","00dfad","e38e79","2f6e7b"]);
__d(function(g,r,i,a,m,e,d){"use strict";var t=r(d[0]).default;Object.defineProperty(e,"__esModule",{value:!0}),e.redirectOnKrakenAuthenticationError=function(t){if(!t.error?.networkError)return!1;const{networkError:c}=t.error;if(401===c.statusCode&&u(c.result)){const t=c.result.redirect_url??'',[u,s]=t.split('?');if(u&&window.location.pathname!==u){let t;s&&(t=(0,n.default)(`?${s}`)),(0,o.replaceToHistory)(u,{maintainQueryParams:!0,params:t})}return!0}return!1};var n=t(r(d[1])),o=r(d[2]);function u(t){if(!t||'object'!=typeof t)return!1;const n=t;return 401===n.error_code&&'authentication_required'===n.error}},"bf6bc6",["ba7a76","a7c4ef","4ee5a9"]);
__d(function(g,r,i,a,m,e,d){"use strict";function t(){const n=r(d[0]);return t=function(){return n},n}Object.defineProperty(e,"__esModule",{value:!0}),e.OPERATION_REGISTRY_VERSION=void 0,e.operationRegistryTransform=function(s,c){const{context:O,operation:{operationId:f,type:u}}=s,p={...s.extensions,persistedQuery:{version:n,sha256Hash:f}};if('query'===u&&!s.usePOSTForQuery&&!c){const n=(0,t().mergeURLSearchParams)(O.searchParams,{...s.variables?{variables:JSON.stringify(s.variables)}:{},extensions:JSON.stringify(p)});if(!n||n.toString().length<o)return{...s,context:{...O,operationId:f,searchParams:n,fetchOptions:{...O.fetchOptions,method:'GET',body:void 0}}}}return{...s,context:{...O,operationId:f,fetchOptions:{...O.fetchOptions,method:'POST',body:JSON.stringify({operationName:s.operationName,variables:s.variables,extensions:p})}}}};const n=e.OPERATION_REGISTRY_VERSION=1,o=3500},"c0fdc0",["ab4631"]);
__d(function(g,r,i,a,m,e,d){"use strict";function t(){const n=r(d[0]);return t=function(){return n},n}Object.defineProperty(e,"__esModule",{value:!0}),e.transformResponse=function(t,s){return t.data?n.reduce((t,n)=>n(t,s),t):t};const n=[function(n,s){return s?.caughtItemsLocators?.length?(0,t().catchErrorsInResponse)(n,s.caughtItemsLocators,'catch'):n},function(n,s){return s?.resultItemsLocators?.length?(0,t().catchErrorsInResponse)(n,s.resultItemsLocators,'result'):n}]},"c948ba",["74aeec"]);
__d(function(g,r,i,a,m,e,d){'use strict';Object.defineProperty(e,"__esModule",{value:!0});var n=e.UniversalApiResponseEvent={defaultProps:{schema:'com.airbnb.jitney.event.logging.Universal:UniversalApiResponseEvent:3.0.0',event_name:'universal_api_response'},propTypes:{}};n.logSndi=!0,n.fullyQualifiedName='Universal.v3.UniversalApiResponseEvent';e.UniversalApiResponseEventEvent=function(s){return{eventData:s,eventDataSchema:n}}},"cb55a0",[]);
__d(function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.UnsubscribeMutationOperation=void 0;e.UnsubscribeMutationOperation={name:'UnsubscribeMutation',type:'mutation',operationId:'accc8115c189c60629025981d7d23d3a4e33de11783b0c489ea677185c6da47f'}},"ceadbe",[]);
__d(function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;e.default=class{constructor(t,s){if(this.code=void 0,this.status=void 0,this.url=void 0,!t)throw new ReferenceError('E03 (https://air.bb/hl-E03): URL is required');this.code='HYPERLOOP_REDIRECT',this.url=t,this.status=s||302}static isRedirect(t){return'HYPERLOOP_REDIRECT'===t?.code}}},"cfeceb",[]);
__d(function(g,r,i,a,m,e,d){'use strict';Object.defineProperty(e,"__esModule",{value:!0});var n=e.UniversalNiobeResponseEvent={defaultProps:{schema:'com.airbnb.jitney.event.logging.Universal:UniversalNiobeResponseEvent:1.0.0',event_name:'universal_niobe_response'},propTypes:{}};n.fullyQualifiedName='Universal.v1.UniversalNiobeResponseEvent';e.UniversalNiobeResponseEventEvent=function(s){return{eventData:s,eventDataSchema:n}}},"d106a1",[]);
__d(function(g,r,i,a,m,e,d){"use strict";var t=r(d[0]).default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,u){return n.has(t)||o(t,u)};var u=t(r(d[1]));const n=new Set(['CityPortalAllUsersPageQuery','CityPortalJurisdictionBySlugQuery','CityPortalCompliancePageQuery']),l=new Set(['MatildaHomePageQuery','M13ArticlePageQuery','MatildaTopicPageQuery','MatildaGuidePageQuery']);function o(t,n){return l.has(t)&&'treatment'===n.findTreatment((0,u.default)('web_niobe_persistent_cache_host_resource'))}},"d8c0f0",["ba7a76","4d3544"]);
__d(function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){navigator.serviceWorker.controller?.postMessage({type:'NIOBE_RESULT_ERROR',key:t})}},"e15052",[]);
__d(function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getLocalizedMessageFromGraphQLErrors=void 0;e.getLocalizedMessageFromGraphQLErrors=o=>{for(const{extensions:s}of o)if(s?.localizedMessage)return s.localizedMessage}},"e38e79",[]);
__d(function(g,r,i,a,m,e,d){"use strict";var o=r(d[0]).default;Object.defineProperty(e,"__esModule",{value:!0}),e.redirectToAirlock=function(o){window.location.href=o};o(r(d[1]))},"e91c21",["ba7a76","cfeceb"]);
__d(function(g,r,i,a,m,e,d){"use strict";function t(){const o=r(d[0]);return t=function(){return o},o}Object.defineProperty(e,"__esModule",{value:!0}),e.NiobeQueryRef=void 0;class o{constructor(t){this.options=void 0,this.result=void 0,this.promise=void 0,this.clientType=void 0,this.deferred=void 0,this.taskController=void 0,this.clientType=t.clientType,this.deferred=t.deferred,this.options=t.options,this.promise=t.promise,this.result=t.result??null,this.taskController=t.options.context?.taskController,this.result||this.promise.then(t=>{this.result=t})}static for(s){const{result:n,promise:l}=s,c=o.memo.get(l),u=n&&o.memo.get(n),p=c||u;if(p){const o=p.clientType===s.clientType,{options:n}=p,{options:l}=s,c=JSON.stringify((0,t().convertToStableObjectOrder)(n))===JSON.stringify((0,t().convertToStableObjectOrder)(l));if(o&&c)return p}const h=new o(s);return o.memo.set(h.promise,h),h.result&&o.memo.set(h.result,h),h.promise.then(t=>o.memo.set(t,h)),h}}e.NiobeQueryRef=o,o.memo=new WeakMap},"ee1cae",["fad99e"]);
__d(function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AIRLOCK_REPLAY_HEADER=e.AIRLOCK_PERMIT_V2_HEADER=void 0;e.AIRLOCK_REPLAY_HEADER='X-Airbnb-Replay-Airlock-Id',e.AIRLOCK_PERMIT_V2_HEADER='X-Airbnb-Supports-Airlock-V2'},"f3d6f1",[]);
__d(function(g,r,i,a,m,e,d){"use strict";var t=r(d[0]).default;Object.defineProperty(e,"__esModule",{value:!0}),e.getRecaptchaPlatformHeaders=function(t,o){if(!(0,n.deliverNiobeBotDetection)())return null;const s=(0,c.maybeGetRecaptchaV3TokenHeader)(t,o,!0);if(!s)return null;return s()},e.recaptchaRetrier=void 0;var n=r(d[1]),o=r(d[2]),c=r(d[3]),s=t(r(d[4]));const u=t=>{if(void 0===t)return'unknown';const n=t[0];return'number'==typeof n?String(n):n},h=t=>{const{extensions:{errorClass:n,errorType:o,response:{statusCode:c}={}}={}}=t;return"ValidationRequiredException"===n||"validation_required"===o||440===c};e.recaptchaRetrier=({result:t,options:n})=>{const c=t.error?.graphQLErrors?.find(h);if(!c)return;const p=u(c.path);return{context:(0,o.getRecaptchaV3TokenHeader)({action:p,timeoutInMs:5e3,maxRetries:5,shouldThrow:!0}).then(t=>{const o=n.context?.fetchOptions;return{fetchOptions:{...o,headers:{...o?.headers,...t}}}}).catch(()=>{(0,s.default)()}),reason:'recaptcha'}}},"f5568d",["ba7a76","60f717","fa27ff","913737","178cf3"]);
__d(function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getHostAndPath=function(n){return process?.env?.NIOBE_ENDPOINT?process.env.NIOBE_ENDPOINT:t};const t='/api/v3'},"f8aa06",[]);
__d(function(g,r,i,a,m,e,d){"use strict";var t=r(d[0]).default;Object.defineProperty(e,"__esModule",{value:!0}),e.httpResolver=async function({metricReporter:t,fetch:h,fetchStatusMessageTarget:f,clientRequestId:w,options:y,isRuntimeResponseMockingEnabled:E,flaggerClient:N}){const{context:T,fetchUrl:v,multiAbortController:{signal:k},operation:O,operationName:_,variables:x}=y,{asyncHeaders:R,fetchOptions:S,clientTraceId:C}=T,j=S?.method??'POST',$={...R?await R:{},...S?.headers,'x-client-request-id':String(w),'x-airbnb-client-trace-id':String(C)};T.eventId&&Object.assign($,{'x-airbnb-network-log-link':String(T.eventId)});const A=S?.body,B=t.now(),I=h(v,{...S,body:A,signal:k,headers:$,method:j});try{const o=await I;f?.dispatchEvent((0,s().createFetchSuccessEvent)());const l=t.now(),{headers:h,ok:w,status:E,statusText:T}=o,v=h.get('content-type'),k=h.has('content-length')?Number(h.get('content-length')):null,O={ok:w,status:E,statusText:T,headers:(0,p().createNiobeHeaders)(h)},_=await o.text(),x=t.now(),R=N.isTrebuchetLaunched((0,n.default)('web.niobe.only_parse_json_responses')),S=Boolean(v?.includes('application/json')&&_.length);let C,j={};if(!R||S)try{const n=t.now();if('rest'===y.type){j={data:''===_?.trim()?{}:JSON.parse(_)}}else j=JSON.parse(_);const o=t.now();C=Math.floor(o-n)}catch(t){return b({message:`Network error (parse): ${t.message}`,response:O,body:_,errorType:3})}const $={contentType:v,contentLength:k,networkStart:B,networkHeadersEnd:l,networkBodyEnd:x,payloadParseLatency:C,serverTiming:h.get('server-timing')};let A;j.errors?.length?A=new(c().NiobeError)(j.errors):E>=300&&(A=new(c().NiobeError)(new(u().NiobeNetworkError)(`Received unexpected status code ${E}`,{body:_,errorType:2,statusCode:E,headers:O.headers})));const{data:M,extensions:F,client_error_info:H}=j;return{data:M,error:A,extensions:F,response:O,metrics:$,client_error_info:H}}catch(t){if((0,o.isAbortError)(t))return{data:null,error:new(c().NiobeError)(t)};f?.dispatchEvent((0,s().createFetchFailureEvent)());const n=t;if('ECONNABORTED'===n?.code){const t=(0,l().ssrTimeoutError)(_,n);return(0,l().reportNiobeError)(t),Object.assign(t,{code:'ECONNABORTED'}),{data:null,error:new(c().NiobeError)(t)}}return b({message:`Network error (connection): ${t.message}`,errorType:1})}};var n=t(r(d[1])),o=r(d[2]);function s(){const t=r(d[3]);return s=function(){return t},t}function c(){const t=r(d[4]);return c=function(){return t},t}function u(){const t=r(d[5]);return u=function(){return t},t}function l(){const t=r(d[6]);return l=function(){return t},t}function p(){const t=r(d[7]);return p=function(){return t},t}function b({message:t,response:n,body:o,errorType:s}){const l=new(u().NiobeNetworkError)(o?`${t}. Received body: ${o}`:t,{body:o,errorType:s,statusCode:n?.status,headers:n?.headers});return{data:null,error:new(c().NiobeError)(l),response:n}}},"f9267b",["ba7a76","2c6bf9","a2c93f","da80b1","00dfad","1004f3","07f19c","6e9310"]);
__d(function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.convertToStableObjectOrder=function t(o){if(Array.isArray(o))return o.map(o=>t(o));if('object'==typeof o&&null!==o){const n=o;return'function'==typeof n.toJSON?t(n.toJSON()):Object.keys(o).sort().reduce((n,c)=>(n[c]=t(o[c]),n),{})}return o}},"fad99e",[]);
//# sourceMappingURL=https://sourcemaps.d.musta.ch/airbnb/static/packages/web/common/8143.530aa8f326.js.map